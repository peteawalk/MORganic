<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test 2</title>
</head>

<body>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <h1>Open console</h1>
    <button id="submit">submit</button>


    <script>
        $("#submit").on("click", function () {
            var zip = 64063;

            function getResults(zip) {
                // or
                // function getResults(lat, lng) {
                $.ajax({
                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    // submit a get request to the restful service zipSearch or locSearch.
                    url: "http://search.ams.usda.gov/farmersmarkets/v1/data.svc/zipSearch?zip=" + zip,
                    // or
                    // url: "http://search.ams.usda.gov/farmersmarkets/v1/data.svc/locSearch?lat=" + lat + "&lng=" + lng,
                    dataType: 'jsonp',
                    jsonpCallback: 'searchResultsHandler'
                });
            }
            console.log(searchResultsHandler);

            //iterate through the JSON result object.
            function searchResultsHandler(searchResults) {
                for (var key in searchresults) {
                    console.log(`key is ${key}`);

                    var results = searchresults[key];
                    for (var i = 0; i < results.length; i++) {
                        var result = results[i];
                        for (var key in result) {
                            //only do an alert on the first search result
                            if (i == 0) {
                                alert(result[key]);
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>

</html>